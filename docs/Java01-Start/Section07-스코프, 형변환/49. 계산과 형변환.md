# 계산과 형변환

> **한 줄 요약:** 형변환은 **대입뿐 아니라 계산 중에도** 일어나며, **같은 타입끼리는 같은 타입 결과**, **다른 타입끼리는 더 넓은 타입으로 자동 형변환**된다.

## 개념 정의

* **형변환**: 계산·대입 시 **타입을 맞추기 위해 값의 타입이 바뀌는 것**.
* **자동 형변환**: 서로 다른 타입의 계산에서 **더 큰(넓은) 타입으로 자동 승격**되는 것.

---

## 예제: `Casting4`

```java
package casting;

public class Casting4 {
    public static void main(String[] args) {
        int div1 = 3 / 2;
        System.out.println("div1 = " + div1); // 1 (int / int -> int)

        double div2 = 3 / 2;
        System.out.println("div2 = " + div2); // 1.0 (int 결과를 double에 대입하며 자동 형변환)

        double div3 = 3.0 / 2;
        System.out.println("div3 = " + div3); // 1.5 (double / int -> double / double)

        double div4 = (double) 3 / 2;
        System.out.println("div4 = " + div4); // 1.5 (명시적 형변환으로 double / double)

        int a = 3;
        int b = 2;
        double result = (double) a / b;
        System.out.println("result = " + result); // 1.5
    }
}
```

### 출력 결과

```
div1 = 1
div2 = 1.0
div3 = 1.5
div4 = 1.5
result = 1.5
```

---

## 계산에서 기억할 2가지

1. **같은 타입끼리 계산 → 같은 타입 결과**

* `int + int` → `int`
* `double + double` → `double`

2. **서로 다른 타입끼리 계산 → 큰 범위로 자동 형변환**

* `int + long` → `long + long` 으로
* `int + double` → `double + double` 으로

> 다양한 타입별 세부 차이는 있지만, **위 기준**으로 이해하면 충분하다.

---

## 예제별 동작 흐름(개념 전개)

아래 단계들은 **실제 내부에서 일어나는 개념적 전개**를 줄 단위로 풀어 쓴 것이다.

### 1) `div1`

```java
int div1 = 3 / 2;     // int / int
int div1 = 1;         // int / int 이므로 결과는 int
```

### 2) `div2`

```java
double div2 = 3 / 2;  // int / int
double div2 = 1;                  // 계산 결과는 int
double div2 = (double) 1;         // int -> double에 대입(자동 형변환)
double div2 = 1.0;                // 최종 저장 값
```

### 3) `div3`

```java
double div3 = 3.0 / 2;            // double / int
double div3 = 3.0 / (double) 2;   // double / double로 맞춤(자동 형변환)
double div3 = 3.0 / 2.0;          // double / double
double div3 = 1.5;                // 최종 결과
```

### 4) `div4`

```java
double div4 = (double) 3 / 2;           // (double) int / int (명시적 형변환)
double div4 = (double) 3 / (double) 2;  // double / double로 맞춤
double div4 = 3.0 / 2.0;                // double / double
double div4 = 1.5;                      // 최종 결과
```

> `3 / 2`처럼 **int 끼리의 나눗셈에서 소수까지** 구하려면, 위 `div4`처럼 **명시적 형변환**을 사용한다.

### 5) 변수 사용 예 (`a`, `b`, `result`)

```java
int a = 3;
int b = 2;
double result = (double) a / b;   // (double) int / int
double result = (double) 3 / 2;   // 변수 값 읽기
double result = (double) 3 / (double) 2; // double / int -> double / double로 형변환
double result = 3.0 / 2.0;        // double / double
double result = 1.5;              // 최종 결과
```
