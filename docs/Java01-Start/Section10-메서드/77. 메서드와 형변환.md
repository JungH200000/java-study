# 메서드와 형변환

메서드를 호출할 때도 **형변환**이 적용된다.
여기서는 **메서드 호출과 명시적 형변환, 자동 형변환**에 대해 살펴본다.

---

## 1. 명시적 형변환

> 메서드를 호출하는데 **인자와 매개변수의 타입이 맞지 않을 때** 어떻게 해야 할까?

다음 예제를 보자.

### `MethodCasting1`

```java
package method;

public class MethodCasting1 {
    public static void main(String[] args) {
        double number = 1.5;
        // printNumber(number); // double을 int형에 대입하므로 컴파일 오류

        printNumber((int) number); // 명시적 형변환을 사용해 double을 int로 변환
    }

    public static void printNumber(int n) {
        System.out.println("숫자: " + n);
    }
}
```

먼저, 주석으로 처리해 둔 부분의 주석을 풀고 실행해 보자.

```java
printNumber(number); // double을 int형에 대입하므로 컴파일 오류
```

### 실행 결과 – 컴파일 오류

```text
java: incompatible types: possible lossy conversion from double to int
```

### 왜 컴파일 오류가 발생할까?

실제 동작을 코드 흐름으로 보면 다음과 같다.

```java
printNumber(number);        // number는 1.5 실수
printNumber(1.5);           // 메서드를 호출하기 전에 number 변수의 값을 읽음
void printNumber(int n = 1.5); // int형 매개변수 n에 double형 실수인 1.5를 대입 시도, 컴파일 오류
```

* `number`는 `1.5`인 **`double` 값**이다.
* `printNumber(int n)`은 **`int` 타입**을 받도록 선언되어 있다.
* `1.5`(double)를 그대로 `int` 매개변수에 넣으려 하기 때문에 **손실(losssy) 가능성이 있는 형변환**이 발생하고, 이 때문에 컴파일 오류가 난다.

### 명시적 형변환으로 해결하기

이 경우 메서드 호출이 꼭 필요하다면, 다음과 같이 **명시적 형변환**을 사용해야 한다.

```java
printNumber((int) number); // 명시적 형변환을 사용해 double을 int로 변환
printNumber(1);            // (double) 1.5 -> (int) 1로 변환

void printNumber(int n = 1); // int형 파라미터 변수 n에 int형 1을 대입
```

### 실행 결과

```text
숫자: 1
```

---

## 2. 자동 형변환

형변환의 기본 관계는 다음과 같다.

```text
int < long < double
```

메서드를 호출할 때 **매개변수에 값을 전달하는 것**도 결국
“**변수에 값을 대입하는 것**”과 같다.

따라서 앞서 배운 **자동 형변환**이 그대로 적용된다.

### `MethodCasting2`

```java
package method;

public class MethodCasting2 {
    public static void main(String[] args) {
        int number = 100;
        printNumber(number); // int에서 double로 자동 형변환
    }

    public static void printNumber(double n) {
        System.out.println("숫자: " + n);
    }
}
```

* `printNumber`는 `double` 형 매개변수(파라미터)를 가진다.
* 여기에 `int` 형 인수 `number`를 전달하지만, **문제 없이 잘 동작**한다.

### 실행 결과

```text
숫자: 100.0
```

### 자동 형변환 과정

자동 형변환이 동작하는 과정을 코드 흐름으로 표현하면 다음과 같다.

```java
printNumber(number);             // number는 int형 100
printNumber(100);                // 메서드를 호출하기 전에 number 변수의 값을 읽음

void printNumber(double n = 100);        // double형 파라미터 변수 n에 int형 값 100을 대입
void printNumber(double n = (double) 100); // double이 더 큰 숫자 범위이므로 자동 형변환 적용
void printNumber(double n = 100.0);        // 자동 형변환 완료
```

자동 형변환 규칙에 따라,
`int 100` → `double 100.0` 으로 **자동으로 변환**된다.

---

## 3. 정리

* 메서드를 호출할 때는 **전달하는 인수의 타입**과 **매개변수의 타입**이 맞아야 한다.
* 단, **자동 형변환이 가능한 타입 관계**라면, 타입이 달라도 **메서드 호출이 가능**하다.
