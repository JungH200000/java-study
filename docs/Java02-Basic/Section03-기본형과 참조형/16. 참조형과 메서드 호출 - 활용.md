# 참조형과 메서드 호출 - 활용

이전에 보았던 `class1.ClassStart3` 코드에는 다음과 같은 **중복되는 부분**이 있다.

* `name`, `age`, `grade` 에 값을 할당
* 학생 정보를 출력

이 중복을 **메서드**를 사용해서 정리해 보자.

---

## 1. 기존 코드: `ClassStart3`

```java
package class1;

public class ClassStart3 {
    public static void main(String[] args) {
        Student student1;
        student1 = new Student();
        student1.name = "학생1";
        student1.age = 15;
        student1.grade = 90;

        Student student2 = new Student();
        student2.name = "학생2";
        student2.age = 16;
        student2.grade = 80;

        System.out.println("이름:" + student1.name + " 나이:" + student1.age + " 성적:" + student1.grade);
        System.out.println("이름:" + student2.name + " 나이:" + student2.age + " 성적:" + student2.grade);
    }
}
```

* 두 학생에 대해 **객체 생성 + 필드 값 설정 + 출력** 코드가 그대로 반복된다.
* 이런 중복은 **메서드로 공통 로직을 뽑아내면** 훨씬 깔끔해진다.

---

## 2. 메서드에 객체 전달

먼저 `ref` 패키지에 사용할 `Student` 클래스를 새로 만든다.

### 2.1 `ref.Student` 클래스

```java
package ref;

public class Student {
    String name;
    int age;
    int grade;
}
```

> `ref` 패키지에도 `Student` 클래스를 만든다.

---

### 2.2 `Method1` – 객체를 메서드에 전달해서 초기화/출력

```java
package ref;

public class Method1 {
    public static void main(String[] args) {
        Student student1 = new Student();
        initStudent(student1, "학생1", 15, 90);

        Student student2 = new Student();
        initStudent(student2, "학생2", 16, 80);

        printStudent(student1);
        printStudent(student2);
    }

    static void initStudent(Student student, String name, int age, int grade) {
        student.name = name;
        student.age = age;
        student.grade = grade;
    }

    static void printStudent(Student student1) {
        System.out.println("이름:" + student1.name + " 나이:" + student1.age + " 성적:" + student1.grade);
    }
}
```

* 참조형은 메서드를 호출할 때 **참조값을 전달**한다.
* 따라서 메서드 내부에서 **전달된 참조값을 통해 객체의 필드를 변경**하거나,
  그 값을 **읽어서 사용할 수 있다.**

정리하면:

* `initStudent(Student student, ...)`
  → 전달한 학생 객체의 **필드에 값을 설정**한다.
* `printStudent(Student student, ...)`
  → 전달한 학생 객체의 **필드 값을 읽어서 출력**한다.

---

## 3. `initStudent()` 메서드 호출 분석

<img src="./images/16/001Method_call_analysis.png" width=700px>

`student1` 이 참조하는 `Student` 인스턴스에 값을 편하게 할당하기 위해
`initStudent()` 메서드를 만들었다.

1. `initStudent(student1, "학생1", 15, 90);` 을 호출하면서 `student1`을 전달한다.
2. 그러면 `student1`의 **참조값이 매개변수 `student` 에 전달**된다.
3. 이 참조값을 통해 `initStudent()` 메서드 안에서
   `student1` 이 참조하는 것과 **동일한 `x001` `Student` 인스턴스**에 접근하고 값을 변경할 수 있다.

즉, 메서드 안에서 `student.name`, `student.age`, `student.grade` 를 바꾸는 것은
곧 `student1` 이 가리키는 인스턴스의 값을 바꾸는 것과 같다.

---

## 4. `import` 사용 시 주의사항

```java
package ref;
import class1.Student;

public class Method1 {
    ...
}
```

* `import class1.Student;` 가 선언되어 있으면 안 된다.
* 이렇게 되면 `class1` 패키지의 `Student` 를 사용하게 되고,
  이 경우 **접근 제어자 때문에 컴파일 오류**가 발생한다.
* 만약 이 선언이 있다면 삭제하자.
  삭제하면 같은 패키지에 있는 `ref.Student` 를 사용한다.

---

## 5. 메서드에서 객체 반환

다음 코드에는 또 다른 중복이 있다.

```java
Student student1 = new Student();
initStudent(student1, "학생1", 15, 90);

Student student2 = new Student();
initStudent(student2, "학생2", 16, 80);
```

* **객체를 생성하고, 초기값을 설정하는 부분**이 두 번 반복된다.
* 이 부분도 하나의 메서드로 합칠 수 있다.

---

### 5.1 `Method2` – 객체를 생성하고 반환하는 메서드

```java
package ref;

public class Method2 {
    public static void main(String[] args) {
        Student student1 = createStudent("학생1", 15, 90);
        Student student2 = createStudent("학생2", 16, 80);

        printStudent(student1);
        printStudent(student2);
    }

    static Student createStudent(String name, int age, int grade) {
        Student student = new Student();
        student.name = name;
        student.age = age;
        student.grade = grade;
        return student;
    }

    static void printStudent(Student student1) {
        System.out.println("이름:" + student1.name + " 나이:" + student1.age + " 성적:" + student1.grade);
    }
}
```

* `createStudent()` 메서드 안에
  **객체 생성과 필드 초기화**를 모두 모아 두었다.
* 이제 이 메서드 **하나만 호출하면**
  `Student` 객체 생성 + 초기값 설정을 한 번에 처리할 수 있다.

하지만 메서드 안에서 객체를 생성했기 때문에,
**만들어진 객체를 메서드 밖에서 사용할 수 있도록 돌려주어야 한다.**

* 메서드는 호출 결과를 `return` 을 통해 **반환**할 수 있다.
* 이 기능을 사용해서 **생성된 객체의 참조값을 메서드 밖으로 반환**하면 된다.

---

### 5.2 `createStudent()` 메서드 호출 분석

<img src="./images/16/002Method_call_analysis.png" width=700px>

메서드 내부에서 인스턴스를 생성한 후, 그 **참조값을 메서드 외부로 반환**한다.
이 참조값만 있으면 해당 인스턴스에 접근할 수 있다.

여기서는 `student1` 변수에 참조값을 보관하고 사용한다.
진행 과정은 아래처럼 생각할 수 있다.

```java
Student student1 = createStudent("학생1", 15, 90); // 메서드 호출 후 결과 반환
Student student1 = student(x001);                // 참조형인 student를 반환
Student student1 = x001;                         // student의 참조값 대입
student1 = x001;
```

* `createStudent()` 는 생성한 `Student` 인스턴스의 **참조값**을 반환한다.
* 이렇게 반환된 참조값을 `student1` 변수에 저장한다.
* 앞으로는 `student1` 을 통해 해당 `Student` 인스턴스를 사용할 수 있다.
