## 배열 도입 - 시작

클래스와 객체 덕분에 학생 데이터를 **구조적으로, 사람이 이해하기 좋은 방식**으로 표현할 수 있게 되었다.
마치 실제 학생이 있고, 그 학생 안에 이름·나이·성적 같은 정보가 담겨 있는 것처럼 보인다.

이제는 **학생마다 객체를 하나씩 생성하고**,
각 객체에 그 학생의 데이터를 저장해서 관리하면 된다.

하지만 여전히 **아쉬운 부분**이 있다. 바로 **학생을 출력하는 코드**이다.

```java
System.out.println("이름:" + student1.name + " 나이:" + student1.age + ...);
System.out.println("이름:" + student2.name + " 나이:" + student2.age + ...);
```

새로운 학생이 추가될 때마다,
**출력하는 코드도 계속 추가**해 주어야 한다.

---

## 1. Student 배열 도입 아이디어

배열을 사용하면, **특정 타입의 값을 연속된 데이터 구조로 묶어서** 편리하게 관리할 수 있다.

* `Student` 클래스를 사용해 만든 변수들도 모두 **`Student` 타입**이다.
* 따라서 **학생들을 배열에 담아서 하나의 데이터 구조로 묶어 관리**할 수 있다.

이제 **`Student` 타입을 요소로 가지는 배열**을 도입해 보자.

---

## 2. `ClassStart4` 코드

```java
package class1;

public class ClassStart4 {
    public static void main(String[] args) {
        Student student1 = new Student();
        student1.name = "학생1";
        student1.age = 15;
        student1.grade = 90;

        Student student2 = new Student();
        student2.name = "학생2";
        student2.age = 16;
        student2.grade = 80;

        Student[] students = new Student[2];
        students[0] = student1;
        students[1] = student2;

        System.out.println("이름:" + students[0].name + " 나이:" + students[0].age + " 성적:" + students[0].grade);
        System.out.println("이름:" + students[1].name + " 나이:" + students[1].age + " 성적:" + students[1].grade);
    }
}
```

---

## 3. 인스턴스 생성 부분

먼저, 학생 객체 두 개를 생성하고 값을 채워 넣는다.

```java
Student student1 = new Student();
student1.name = "학생1";
student1.age = 15;
student1.grade = 90;

Student student2 = new Student();
student2.name = "학생2";
student2.age = 16;
student2.grade = 80;
```

* `Student` 클래스를 기반으로 `student1`, `student2` **인스턴스를 생성**했다.
* 그리고 각 인스턴스의 멤버 변수에 필요한 값을 설정해 두었다.

> (여기까지의 과정은 **인스턴스 생성 그림**으로도 표현할 수 있다.)
<img src="./images/09/01CreateInstance.png" width=450px>

---

## 4. 배열에 참조값 대입하기

이번에는 `Student` 를 담을 수 있는 **배열**을 생성하고,
그 배열에 `student1`, `student2` 인스턴스를 보관한다.

### 4-1. Student 배열 생성

```java
Student[] students = new Student[2];
```

<img src="./images/09/02ArrayReference.png" width=600px>

* `Student` 변수를 **2개 보관할 수 있는 크기 2의 배열**을 만든다.
* `Student` 타입의 변수는 **`Student` 인스턴스의 참조값**을 보관한다.
* 마찬가지로 `Student` 배열의 각각의 항목도 **`Student` 타입 변수**일 뿐이며,
  결국 **`Student` 타입의 참조값을 보관**한다.

즉,

* `student1`, `student2` 변수는 `Student` 타입의 참조값을 가지고 있다.
* 배열의 각 칸도 **참조값을 담는 공간**이다.

배열을 막 생성했을 때는,
아직 어떤 참조값도 대입하지 않았으므로
각 요소는 **참조값이 없다는 의미의 `null` 값**으로 초기화된다.

### 4-2. 배열에 참조값 저장

이제 배열에 객체의 참조값을 보관해 보자.

```java
students[0] = student1;
students[1] = student2;

// 자바에서 대입은 항상 변수에 들어 있는 값을 복사한다.
students[0] = x001;
students[1] = x002;
```

* `student1`, `student2`에는 이미 **참조값**이 들어 있다.
* 따라서 이 참조값이 `students` 배열에 저장된다.
  (다른 말로 하면, `student1`, `student2`에 보관된 참조값을 **읽어서 복사한 후** 배열에 대입한다는 뜻이다.)

> **배열에 참조값을 대입한 이후 배열 그림**을 떠올려 보면,
> <img src="./images/09/03ArrayReference.png" width=450px>
>
> 이제 배열은 `x001`, `x002` 참조값을 가지게 된다.
> 이 참조값을 통해 `x001`(학생1), `x002`(학생2) `Student` 인스턴스에 모두 접근할 수 있다.

* **배열에 참조값을 대입한 이후 최종 그림**

<img src="./images/09/04ArrayReference.png" width=600px>

### 4-3. 대입(=)은 항상 ‘값 복사’

중요한 내용이므로 다시 한 번 정리한다.

```java
students[0] = student1;
students[1] = student2;

// 자바에서 대입은 항상 변수에 들어 있는 값을 복사한다.
students[0] = x001;
students[1] = x002;
```

* 자바에서 **변수 대입(`=`)** 은 모두
  **오른쪽 변수에 들어 있는 값을 복사해서 왼쪽에 전달**하는 것이다.
* 여기서는 오른쪽에 있는 `student1`, `student2`에 **참조값**이 들어 있으므로,
  이 참조값이 복사되어 배열 요소에 저장된다.
* 따라서 기존 `student1`, `student2`에 들어 있던 참조값은 **그대로 유지**된다.

#### 주의!

> **변수에는 인스턴스 자체가 들어 있는 것이 아니다!**
> 인스턴스의 위치를 가리키는 **참조값**이 들어 있을 뿐이다!

따라서 대입(`=`)이 일어날 때 **복사되는 것은 인스턴스가 아니라 참조값**이다.

---

## 5. 배열에 들어 있는 객체 사용

배열에 들어 있는 객체를 사용하려면,

1. 먼저 **배열에 접근**하고,
2. 그다음에 **객체에 접근**하면 된다.

앞에서 설명한 그림과 코드를 함께 보면 흐름을 쉽게 이해할 수 있다.

### 5-1. 학생1 예제

```java
System.out.println(students[0].name);      // 배열 접근 시작
System.out.println(x005[0].name);          // [0]를 사용해서 x005 배열의 0번 요소에 접근
System.out.println(x001.name);             // .(dot)을 사용해서 참조값으로 객체에 접근
System.out.println("학생1");
```

* `students[0].name`
  → 배열 `students`의 0번 요소에 있는 참조값을 통해 객체에 접근하고,
  그 객체의 `name` 멤버 변수를 읽는다.
* `x005[0].name`, `x001.name`은 같은 과정을 **참조값과 배열 이름으로 풀어 쓴 표현**이다.
* 최종적으로 `"학생1"`이 출력된다.

### 5-2. 학생2 예제

```java
System.out.println(students[1].name);      // 배열 접근 시작
System.out.println(x005[1].name);          // [1]를 사용해서 x005 배열의 1번 요소에 접근
System.out.println(x002.name);             // .(dot)을 사용해서 참조값으로 객체에 접근
System.out.println("학생2");
```

* 이번에는 배열의 **1번 요소**를 통해 두 번째 학생 객체에 접근한다.
* 마찬가지로, 참조값을 따라가서 `name` 멤버 변수 값을 읽어 오고,
* 최종적으로 `"학생2"`가 출력된다.
